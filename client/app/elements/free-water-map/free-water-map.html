
<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="free-water-map">

  <template>
    <style include="shared-styles"></style>

    <!-- firebase -->
    <script src="../../../bower_components/firebase/firebase.js"></script>

    <firebase-collection
      location="https://blinding-fire-1061.firebaseIO.com/marks"
      data="{{marks}}"></firebase-collection>

     <smart-map marks="[[marks]]"></smart-map>
  </template>

  <script>
    Polymer({
      is: 'free-water-map',
      ready: function(){
        var smartMap = this.$$('smart-map');
        var marksdataSource = new Firebase('https://blinding-fire-1061.firebaseIO.com/marks');

        this.$$('smart-map').addEventListener('publish', function (data) {
            marksdataSource.push(data.detail);
            smartMap.successRegisterMessage = 'Publish successfully';
        });

        this.$$('smart-map').addEventListener('confirm', function (data) {
          /*var mark = data.detail;
          var marksdataSource = new Firebase('https://blinding-fire-1061.firebaseIO.com/' + mark.name);
          marksdataSource.update({confirm: mark.confirm + 1});*/
        });

        this.$$('smart-map').addEventListener('complaint', function (data) {
          /*var mark = data.detail;
          var marksdataSource = new Firebase('https://blinding-fire-1061.firebaseIO.com/' + mark.name);
          marksdataSource.update({confirm: mark.deny + 1});*/
        });
      }
    });
  </script>
</dom-module>
